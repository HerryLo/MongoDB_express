'use strict';

var express = require('express');
var router = express.Router();
var UserModel = require('../../model/UserModel');

var _require = require('../../utils/constant'),
    Sendformat = _require.Sendformat;

var loginCheck = function loginCheck(query, d) {
    var user = query.user;
    var password = query.password;
    if (!d) return false;
    if (user != d.user || password != d.password) {
        return '用户名或密码错误';
    } else {
        return '成功';
    }
};

router.get('/', function (req, res, next) {
    var cookies = req.cookies;
    var user = req.query.user;
    var password = req.query.password;
    UserModel.findUser({
        user: user
    }).then(function (result) {
        var d = result[0];
        var obj = {};
        var desc = loginCheck(req.query, d);
        if (d) {
            res.send({ code: 0, desc: desc, data: [] });
        } else {
            res.send({ code: 1, desc: desc, data: data });
        }
    });
});

module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9yb3V0ZXMvdXNlci9sb2dpbi5qcyJdLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsIlVzZXJNb2RlbCIsIlNlbmRmb3JtYXQiLCJsb2dpbkNoZWNrIiwicXVlcnkiLCJkIiwidXNlciIsInBhc3N3b3JkIiwiZ2V0IiwicmVxIiwicmVzIiwibmV4dCIsImNvb2tpZXMiLCJmaW5kVXNlciIsInRoZW4iLCJyZXN1bHQiLCJvYmoiLCJkZXNjIiwic2VuZCIsImNvZGUiLCJkYXRhIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNQSxVQUFVQyxRQUFRLFNBQVIsQ0FBaEI7QUFDQSxJQUFNQyxTQUFTRixRQUFRRyxNQUFSLEVBQWY7QUFDQSxJQUFNQyxZQUFZSCxRQUFRLHVCQUFSLENBQWxCOztlQUNxQkEsUUFBUSxzQkFBUixDO0lBQWRJLFUsWUFBQUEsVTs7QUFFUCxJQUFNQyxhQUFhLFNBQWJBLFVBQWEsQ0FBQ0MsS0FBRCxFQUFRQyxDQUFSLEVBQWE7QUFDNUIsUUFBTUMsT0FBT0YsTUFBTUUsSUFBbkI7QUFDQSxRQUFNQyxXQUFXSCxNQUFNRyxRQUF2QjtBQUNBLFFBQUcsQ0FBQ0YsQ0FBSixFQUFPLE9BQU8sS0FBUDtBQUNQLFFBQUdDLFFBQVFELEVBQUVDLElBQVYsSUFBa0JDLFlBQVlGLEVBQUVFLFFBQW5DLEVBQTRDO0FBQ3hDLGVBQU8sVUFBUDtBQUNILEtBRkQsTUFFSztBQUNELGVBQU8sSUFBUDtBQUNIO0FBQ0osQ0FURDs7QUFXQVIsT0FBT1MsR0FBUCxDQUFXLEdBQVgsRUFBZ0IsVUFBQ0MsR0FBRCxFQUFNQyxHQUFOLEVBQVdDLElBQVgsRUFBb0I7QUFDaEMsUUFBTUMsVUFBVUgsSUFBSUcsT0FBcEI7QUFDQSxRQUFNTixPQUFPRyxJQUFJTCxLQUFKLENBQVVFLElBQXZCO0FBQ0EsUUFBTUMsV0FBV0UsSUFBSUwsS0FBSixDQUFVRyxRQUEzQjtBQUNBTixjQUFVWSxRQUFWLENBQW1CO0FBQ2ZQLGNBQU1BO0FBRFMsS0FBbkIsRUFFR1EsSUFGSCxDQUVRLFVBQVVDLE1BQVYsRUFBa0I7QUFDdEIsWUFBTVYsSUFBSVUsT0FBTyxDQUFQLENBQVY7QUFDQSxZQUFJQyxNQUFNLEVBQVY7QUFDQSxZQUFJQyxPQUFPZCxXQUFXTSxJQUFJTCxLQUFmLEVBQXNCQyxDQUF0QixDQUFYO0FBQ0EsWUFBSUEsQ0FBSixFQUFPO0FBQ0hLLGdCQUFJUSxJQUFKLENBQVMsRUFBQ0MsTUFBTSxDQUFQLEVBQVVGLE1BQU1BLElBQWhCLEVBQXNCRyxNQUFLLEVBQTNCLEVBQVQ7QUFDSCxTQUZELE1BRU87QUFDSFYsZ0JBQUlRLElBQUosQ0FBUyxFQUFDQyxNQUFNLENBQVAsRUFBVUYsTUFBTUEsSUFBaEIsRUFBc0JHLE1BQU1BLElBQTVCLEVBQVQ7QUFDSDtBQUVKLEtBWkQ7QUFjSCxDQWxCRDs7QUFvQkFDLE9BQU9DLE9BQVAsR0FBaUJ2QixNQUFqQiIsImZpbGUiOiJsb2dpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuY29uc3QgVXNlck1vZGVsID0gcmVxdWlyZSgnLi4vLi4vbW9kZWwvVXNlck1vZGVsJylcbmNvbnN0IHtTZW5kZm9ybWF0fSA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL2NvbnN0YW50JylcblxuY29uc3QgbG9naW5DaGVjayA9IChxdWVyeSwgZCk9PiB7XG4gICAgY29uc3QgdXNlciA9IHF1ZXJ5LnVzZXI7XG4gICAgY29uc3QgcGFzc3dvcmQgPSBxdWVyeS5wYXNzd29yZDtcbiAgICBpZighZCkgcmV0dXJuIGZhbHNlO1xuICAgIGlmKHVzZXIgIT0gZC51c2VyIHx8IHBhc3N3b3JkICE9IGQucGFzc3dvcmQpe1xuICAgICAgICByZXR1cm4gJ+eUqOaIt+WQjeaIluWvhueggemUmeivrydcbiAgICB9ZWxzZXtcbiAgICAgICAgcmV0dXJuICfmiJDlip8nXG4gICAgfVxufVxuXG5yb3V0ZXIuZ2V0KCcvJywgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgY29uc3QgY29va2llcyA9IHJlcS5jb29raWVzO1xuICAgIGNvbnN0IHVzZXIgPSByZXEucXVlcnkudXNlcjtcbiAgICBjb25zdCBwYXNzd29yZCA9IHJlcS5xdWVyeS5wYXNzd29yZDtcbiAgICBVc2VyTW9kZWwuZmluZFVzZXIoe1xuICAgICAgICB1c2VyOiB1c2VyXG4gICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgIGNvbnN0IGQgPSByZXN1bHRbMF07XG4gICAgICAgIGxldCBvYmogPSB7fTtcbiAgICAgICAgbGV0IGRlc2MgPSBsb2dpbkNoZWNrKHJlcS5xdWVyeSwgZCk7XG4gICAgICAgIGlmIChkKSB7XG4gICAgICAgICAgICByZXMuc2VuZCh7Y29kZTogMCwgZGVzYzogZGVzYywgZGF0YTpbXX0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzLnNlbmQoe2NvZGU6IDEsIGRlc2M6IGRlc2MsIGRhdGE6IGRhdGF9KTtcbiAgICAgICAgfVxuXG4gICAgfSlcblxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xuIl19