'use strict';

var express = require('express');
var utils = require('../../utils/utils.js');
var router = express.Router();

/**
 * 抓取图片
 */
router.get('/', function (req, res, next) {
    var query = req.query;
    var url = query.imgSrc;
    if (url) {
        utils.GetImg(url).then(function (url) {
            res.redirect('/img/' + url);
        });
    } else {
        res.send({ data: "", code: 0 });
    }
});

module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9yb3V0ZXMvb3RoZXIvZmV0Y2hJbWcuanMiXSwibmFtZXMiOlsiZXhwcmVzcyIsInJlcXVpcmUiLCJ1dGlscyIsInJvdXRlciIsIlJvdXRlciIsImdldCIsInJlcSIsInJlcyIsIm5leHQiLCJxdWVyeSIsInVybCIsImltZ1NyYyIsIkdldEltZyIsInRoZW4iLCJyZWRpcmVjdCIsInNlbmQiLCJkYXRhIiwiY29kZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBTUEsVUFBVUMsUUFBUSxTQUFSLENBQWhCO0FBQ0EsSUFBTUMsUUFBUUQsUUFBUSxzQkFBUixDQUFkO0FBQ0EsSUFBTUUsU0FBU0gsUUFBUUksTUFBUixFQUFmOztBQUVBOzs7QUFHQUQsT0FBT0UsR0FBUCxDQUFXLEdBQVgsRUFBZ0IsVUFBQ0MsR0FBRCxFQUFNQyxHQUFOLEVBQVdDLElBQVgsRUFBbUI7QUFDL0IsUUFBTUMsUUFBUUgsSUFBSUcsS0FBbEI7QUFDQSxRQUFNQyxNQUFNRCxNQUFNRSxNQUFsQjtBQUNBLFFBQUlELEdBQUosRUFBUztBQUNMUixjQUFNVSxNQUFOLENBQWFGLEdBQWIsRUFDS0csSUFETCxDQUNVLFVBQVVILEdBQVYsRUFBZTtBQUNqQkgsZ0JBQUlPLFFBQUosQ0FBYSxVQUFVSixHQUF2QjtBQUNILFNBSEw7QUFJSCxLQUxELE1BS087QUFDSEgsWUFBSVEsSUFBSixDQUFTLEVBQUNDLE1BQU0sRUFBUCxFQUFXQyxNQUFNLENBQWpCLEVBQVQ7QUFDSDtBQUNKLENBWEQ7O0FBYUFDLE9BQU9DLE9BQVAsR0FBaUJoQixNQUFqQiIsImZpbGUiOiJmZXRjaEltZy5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG5jb25zdCB1dGlscyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3V0aWxzLmpzJyk7XG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG4vKipcbiAqIOaKk+WPluWbvueJh1xuICovXG5yb3V0ZXIuZ2V0KCcvJywgKHJlcSwgcmVzLCBuZXh0KT0+IHtcbiAgICBjb25zdCBxdWVyeSA9IHJlcS5xdWVyeTtcbiAgICBjb25zdCB1cmwgPSBxdWVyeS5pbWdTcmM7XG4gICAgaWYgKHVybCkge1xuICAgICAgICB1dGlscy5HZXRJbWcodXJsKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHVybCkge1xuICAgICAgICAgICAgICAgIHJlcy5yZWRpcmVjdCgnL2ltZy8nICsgdXJsKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJlcy5zZW5kKHtkYXRhOiBcIlwiLCBjb2RlOiAwfSk7XG4gICAgfVxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gcm91dGVyOyJdfQ==