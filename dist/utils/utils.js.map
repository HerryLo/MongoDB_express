{"version":3,"sources":["../../utils/utils.js"],"names":["fs","require","request","path","GetImg","url","Promise","resolve","reject","head","err","res","body","console","log","filename","Date","getTime","substr","dir","join","__dirname","pipe","createWriteStream","module","exports"],"mappings":";;AAAA,IAAMA,KAAKC,QAAQ,IAAR,CAAX;AACA,IAAMC,UAAUD,QAAQ,SAAR,CAAhB;AACA,IAAME,OAAOF,QAAQ,MAAR,CAAb;;AAEA;;;;;AAKA,SAASG,MAAT,CAAgBC,GAAhB,EAAqB;AACjB,WAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAmB;AAClCN,gBAAQO,IAAR,CAAaJ,GAAb,EAAkB,UAACK,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAmB;AACjC,gBAAGF,GAAH,EAAO;AACHG,wBAAQC,GAAR,CAAYJ,GAAZ;AACH,aAFD,MAEK;AACD,oBAAMK,WAAW,IAAIC,IAAJ,GAAWC,OAAX,KAAqBZ,IAAIa,MAAJ,CAAW,CAAC,CAAZ,EAAc,CAAd,CAAtC;AACA,oBAAMC,MAAMhB,KAAKiB,IAAL,CAAUC,SAAV,EAAqB,qBAAmBN,QAAxC,CAAZ;AACAb,wBAAQG,GAAR,EAAaiB,IAAb,CAAkBtB,GAAGuB,iBAAH,CAAqBJ,GAArB,CAAlB;AACAN,wBAAQC,GAAR,CAAY,MAAZ;AACAP,wBAAQQ,QAAR;AACH;AACJ,SAVD;AAWH,KAZM,CAAP;AAaH;;AAEDS,OAAOC,OAAP,GAAiB;AACbrB,YAAQA;AADK,CAAjB","file":"utils.js","sourcesContent":["const fs = require('fs');\r\nconst request = require('request');\r\nconst path = require('path');\r\n\r\n/**\r\n * 抓取图片\r\n * @param url\r\n * @constructor\r\n */\r\nfunction GetImg(url) {\r\n    return new Promise((resolve, reject)=>{\r\n        request.head(url, (err, res, body)=> {\r\n            if(err){\r\n                console.log(err);\r\n            }else{\r\n                const filename = new Date().getTime()+url.substr(-4,4)\r\n                const dir = path.join(__dirname ,'./../public/img/'+filename);\r\n                request(url).pipe(fs.createWriteStream(dir));\r\n                console.log('拉取成功');\r\n                resolve(filename);\r\n            }\r\n        });\r\n    })\r\n}\r\n\r\nmodule.exports = {\r\n    GetImg: GetImg\r\n}"]}