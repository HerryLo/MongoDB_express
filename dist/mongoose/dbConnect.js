'use strict';

var mongoose = require('mongoose');
var constant = require('../utils/constant.js');

mongoose.Promise = global.Promise;
global.mongoose = mongoose;

function connect() {
    mongoose.connect(constant.dbUrl, {
        useMongoClient: true
    });
    var db = mongoose.connection;
    db.once('open', function (callback) {
        console.log('db connection success:');
    });
    db.on('error', function () {
        console.log('db connection error:');
        db.close();
    });
}
module.exports = {
    connect: connect,
    mongoose: mongoose
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9tb25nb29zZS9kYkNvbm5lY3QuanMiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJyZXF1aXJlIiwiY29uc3RhbnQiLCJQcm9taXNlIiwiZ2xvYmFsIiwiY29ubmVjdCIsImRiVXJsIiwidXNlTW9uZ29DbGllbnQiLCJkYiIsImNvbm5lY3Rpb24iLCJvbmNlIiwiY2FsbGJhY2siLCJjb25zb2xlIiwibG9nIiwib24iLCJjbG9zZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSUEsV0FBV0MsUUFBUSxVQUFSLENBQWY7QUFDQSxJQUFJQyxXQUFXRCxRQUFRLHNCQUFSLENBQWY7O0FBRUFELFNBQVNHLE9BQVQsR0FBbUJDLE9BQU9ELE9BQTFCO0FBQ0FDLE9BQU9KLFFBQVAsR0FBa0JBLFFBQWxCOztBQUVBLFNBQVNLLE9BQVQsR0FBbUI7QUFDZkwsYUFBU0ssT0FBVCxDQUFpQkgsU0FBU0ksS0FBMUIsRUFBaUM7QUFDN0JDLHdCQUFnQjtBQURhLEtBQWpDO0FBR0EsUUFBSUMsS0FBS1IsU0FBU1MsVUFBbEI7QUFDQUQsT0FBR0UsSUFBSCxDQUFRLE1BQVIsRUFBZ0IsVUFBQ0MsUUFBRCxFQUFhO0FBQ3pCQyxnQkFBUUMsR0FBUixDQUFZLHdCQUFaO0FBQ0gsS0FGRDtBQUdBTCxPQUFHTSxFQUFILENBQU0sT0FBTixFQUFlLFlBQUs7QUFDaEJGLGdCQUFRQyxHQUFSLENBQVksc0JBQVo7QUFDQUwsV0FBR08sS0FBSDtBQUNILEtBSEQ7QUFJSDtBQUNEQyxPQUFPQyxPQUFQLEdBQWlCO0FBQ2JaLGFBQVNBLE9BREk7QUFFYkwsY0FBVUE7QUFGRyxDQUFqQiIsImZpbGUiOiJkYkNvbm5lY3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xudmFyIGNvbnN0YW50ID0gcmVxdWlyZSgnLi4vdXRpbHMvY29uc3RhbnQuanMnKTtcblxubW9uZ29vc2UuUHJvbWlzZSA9IGdsb2JhbC5Qcm9taXNlO1xuZ2xvYmFsLm1vbmdvb3NlID0gbW9uZ29vc2VcblxuZnVuY3Rpb24gY29ubmVjdCgpIHtcbiAgICBtb25nb29zZS5jb25uZWN0KGNvbnN0YW50LmRiVXJsLCB7XG4gICAgICAgIHVzZU1vbmdvQ2xpZW50OiB0cnVlXG4gICAgfSlcbiAgICB2YXIgZGIgPSBtb25nb29zZS5jb25uZWN0aW9uO1xuICAgIGRiLm9uY2UoJ29wZW4nLCAoY2FsbGJhY2spPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnZGIgY29ubmVjdGlvbiBzdWNjZXNzOicpO1xuICAgIH0pO1xuICAgIGRiLm9uKCdlcnJvcicsICgpPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnZGIgY29ubmVjdGlvbiBlcnJvcjonKVxuICAgICAgICBkYi5jbG9zZSgpO1xuICAgIH0pO1xufVxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgY29ubmVjdDogY29ubmVjdCxcbiAgICBtb25nb29zZTogbW9uZ29vc2Vcbn0iXX0=